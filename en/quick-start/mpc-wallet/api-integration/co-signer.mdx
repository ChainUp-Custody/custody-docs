---
title: Co-Signer Configuration
---

## I. Overview

This document will introduce the functionality of Co-Signer and how to configure Co-Signer to meet the business requirements of customers. In the ChainUp Custody ecosystem, Co-Signer is not only a security measure but also a crucial factor in driving decentralization and trust, aiming to provide users with a more secure, transparent, and efficient digital experience.

## II. What is Co-Signer?

In the field of blockchain or digital assets, **"Co-Signer"** usually refers to a mechanism where multiple individuals or entities need to jointly sign a transaction or contract. This mechanism is mainly used to enhance the security and trustworthiness of transactions or contracts. The purpose of using Co-Signer is to ensure that multiple confirmations and authorizations are required when critical operations are involved, thereby reducing potential risks and increasing overall security. This is particularly important for high-value transactions or critical business operations in the digital asset and blockchain network.

## III. Role of Co-Signer

**Secure Digital Asset Management**

In the field of digital assets, Co-Signer is used to protect high-value digital assets. Multi-signature wallets ensure that private keys are distributed in different locations, preventing the leakage or misuse of a single private key.

**Smart Contract Operations**

For smart contracts requiring multi-party confirmation, Co-Signer provides a secure mechanism. For example, distributed applications (DApps) may require multiple parties to co-sign to execute sensitive operations.

**Transaction Security**

For transactions on the blockchain, especially those involving large sums of money, multi-signature enhances the security of the transaction. Even if one account is compromised, it is not sufficient to complete the transaction.

**Enterprise Applications**

In enterprise-level blockchain applications, Co-Signer is used to ensure that multiple authorized entities must agree to specific decisions or transactions to meet compliance and audit requirements.

## IV. Deploying Co-Signer

### IV.I. Server Configuration Requirements

<Tip>
**Minimum CPU Requirements: AMD64 or ARM64 architecture, 2 cores, 2.0 GHz frequency**

**Memory: 8GB**

**Hard Disk: 256GB**
</Tip>

### IV.II. Co-Signer Deployment Process

#### Obtaining Co-Signer

- **Regular Version**

1. Run the program to download  

  File address: https://github.com/ChainUp-Custody/mpc-co-signer/releases, select co-signer-linux-(version) version. This version is directly executable on Linux.

2. Modify the program's executable permissions

```sh
chmod +x co-signer-(version)
```

- **SGX Version**
<Steps>

    <Step title="Purchase Microsoft Cloud SGX Server">
        For Microsoft Cloud SGX server, please refer to the documentation: [Microsoft Azure Confidential Computing](https://learn.microsoft.com/zh-cn/azure/confidential-computing/virtual-machine-solutions-sgx)
    </Step>

    <Step title="Install Ego Environment">
       ```sh
       sudo apt-get install software-properties-common
       sudo apt install snapd
       sudo wget -qO- https://download.01.org/intel-sgx/sgx_repo/ubuntu/intel-sgx-deb.key | sudo apt-key add
       sudo add-apt-repository "deb [arch=amd64] https://download.01.org/intel-sgx/sgx_repo/ubuntu `lsb_release -cs` main"
       sudo wget https://github.com/edgelesssys/ego/releases/download/v1.3.0/ego_1.3.0_amd64.deb
       sudo apt install -y ./ego_1.3.0_amd64.deb build-essential libssl-dev
       ```
    </Step>

    <Step title="Create Working Directory">
        ```sh
        mkdir -p <work path/>
        ```
    </Step>

    <Step title="Switch to Working Directory">
        ```sh
        cd <work path/>
        ```
    </Step>

    <Step title="Download Program">
        File address: [Co-Signer Releases](https://github.com/ChainUp-Custody/mpc-co-signer/releases), select co-signer-linux-(version) version. Please follow the subsequent steps to compile and package using Ego.

        Note: Support for SGX is available after **v1.1.0** version.
    </Step>

    <Step title="Add Configuration File enclave.json in the Working Directory">
        <Warning>
        **Important Note**

        1. In the configuration file, the value of exe should be: co-signer-sgx. If you modify the executable program name, the value of exe should be changed to the custom name.

        2. The configuration file specifies that co-signer can only run in the /data/co-signer/ directory. If you want to customize the running directory, please change **all** /data/co-signer/ in the configuration to the custom directory.

        3. Heap memory, **heapSize** configuration is recommended to be: 6G (6144).

        </Warning>
        ```json
        {
            "exe": "mpc-co-signer",
            "key": "private.pem",
            "debug": false,
            "heapSize": 2048,
            "executableHeap": false,
            "productID": 1,
            "securityVersion": 1,
            "mounts": [{"readOnly":false, "type":"hostfs", "source":"/etc/ssl/certs/", "target":"/etc/ssl/certs/"},{"readOnly":false, "type":"hostfs", "source":"/data/co-signer/", "target":"/data/co-signer/"}],
            "env": [{"name":"HOME","fromHost":true},{"name":"PWD","value":"/data/co-signer/"}],
            "files": null
        }
        ```
    </Step>

    <Step title="Re-sign and Bundle to Get the Runnable SGX Program">
        ```sh
        ego sign

        ego bundle co-signer-sgx-(version)
        ```
    </Step>

</Steps>


#### Run Co-Signer

To view the help for the executable program: `co-signer -h`, the result is as follows:

```sh
v1.1.0

Usage: co-signer [-hv] [-server] [-rsa-gen] [-recover-seed mnemonic] [-rsa-pri-import rsa private key] [-verify-sign-pub-import develop rsa public key to verify unsign transaction] [-keystore-gen] [-custody
-pub-import]

Options:
    -custody-pub-import string
            import custody public key
    -h this is help
    -keystore-gen
            Used to merge files (including seed.dat, rsaPri.pem, etc.) to generate a new keystore.json file
    -recover-seed string
            recover seed by mnemonic, use '-' between each word
    -rsa-gen
            generate rsa pem by tools
    -rsa-pri-import string
            import current rsa private key
    -server
            start co-signer otherwise only tools
    -v this is version
    -verify-sign-pub-import string
            import the public key used for verifying sign


## Explanation
1. -v                         Get the version number of co-signer
2. -server                    Start the co-signer parameter. If this parameter is not used during startup, it is in tool mode.
3. -conf                      Specify the configuration file when starting co-signer, default: ./conf/config.yaml
4. -rsa-gen                   Tool mode: Enter the startup password, generate an encrypted private key and an unencrypted public key, and generate it to the keystore.json file.
5. -rsa-pri-import            Tool mode: Enter the startup password, import the existing rsa private key, generate the encrypted rsa private key file (import only the private key), and generate it to the keystore.json file.
6. -verify-sign-pub-import    Import the public key used to verify the sign of the customer (sign), and generate it to the keystore.json file. After importing, co-signer will verify the withdrawal and web3 customer sign (sign), and the sign generation method is detailed in the API documentation.
7. -custody-pub-import        Tool mode: Enter the startup password, import the public key of custody, and generate it to the keystore.json file.
8. -keystore-gen              Tool mode: Used to unify import files such as seed.dat, rsaPri.pem, rsaPub.pem in v1.0.x version into the keystore.json file.
